# LeLamp Troubleshooting Guide

This guide covers common issues encountered during LeLamp assembly and operation, with step-by-step solutions.

## 1. Hardware Issues

### RGB Problems

**Problem**: The LED matrix doesn't light up fully.

- **Edit number of LEDs**: You can edit the number of LED used in lelamp_runtime: `/lelamp/service/rgb/rgb_service.py`. You can find led_count as an default parameter of RGBService Class. Change this to change the number of LEDs or change the number in any instantiation of this class.

### Pi Setup Problems

**Problem**: Cannot SSH into Pi

- **Check network connection**: Verify Pi is connected to WiFi
- **Verify SSH enabled**: Ensure SSH was enabled during OS setup
- **Check hostname**: Try IP address instead of hostname.local
- **Firewall issues**: Temporarily disable computer firewall for testing

**Problem**: Runtime installation fails

- **Check internet connection**: Ensure Pi has stable internet access
- **Update system**: Run `sudo apt update && sudo apt upgrade` first
- **Install uv manually**: Follow official uv installation instructions
- **Check disk space**: Ensure sufficient space on SD card (16GB+ recommended)

**Problem**: Permission errors during testing

- **Use sudo for hardware tests**: RGB and some sensor tests require root access
- **Check user groups**: Add pi user to gpio, i2c, spi groups
- **Verify device permissions**: Check /dev/ device file permissions

## 2. Wi-Fi Issues

When your Raspberry Pi cannot connect to a known Wi-Fi network (e.g., youâ€™ve moved locations or changed routers), there are several methods to reconfigure Wi-Fi access. Each method has tradeoffs depending on whether you still have SSH or physical access.

### Method 1: Use Ethernet (Or if you have SSH access)

If you can connect your Raspberry Pi to an Ethernet cable:

1. Plug the Pi into a router or computer via Ethernet.
2. Check the Piâ€™s IP address from your routerâ€™s device list or using a network scanner like `nmap`.
3. SSH into the Pi:

   ```bash
   ssh pi@<ethernet_ip_address>
   ```

4. Launch the configuration tool:

   ```bash
   sudo raspi-config
   ```

5. Navigate to:

   ```pgsql
   System Options â†’ Wireless LAN
   ```

6. Enter your Wi-Fi SSID and password when prompted.
7. Reboot the Pi to apply changes:
   ```bash
   sudo reboot
   ```

This is the most reliable method since you keep full SSH access throughout.

If you can't edit using raspi-config:

1. Edit the Wi-Fi configuration file:

   ```bash
   sudo nano /etc/wpa_supplicant/wpa_supplicant.conf
   ```

2. Add or update your Wi-Fi network block:

   ```bash
   country=US
   ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
   update_config=1

   network={
       ssid="YourNetworkName"
       psk="YourNetworkPassword"
   }
   ```

3. Save (Ctrl+O, Enter) and exit (Ctrl+X).

4. Reboot the Pi to apply changes:

```bash
sudo reboot
```

### Method 2: Share a Hotspot with the Same Name and Password

If you canâ€™t physically reach the Pi or connect Ethernet:

1. Create a mobile hotspot on your phone or laptop.
2. Use **the exact same SSID (network name)** and **password** as your old Wi-Fi network.
3. The Raspberry Pi will automatically reconnect to this hotspot, since it matches its saved credentials.

> ðŸ’¡ This method is great for quick recovery if you forgot to update the Wi-Fi credentials before moving the Pi.

### Method 3: SD Card Method (Unreliable)

If you canâ€™t SSH in or use Ethernet:

1. Power off the Raspberry Pi and remove the SD card.
2. Insert it into another computer.
3. Open the **boot** partition (the only visible partition on most systems).
4. Create a new file named `wpa_supplicant.conf` in the boot directory with the following contents:

   ```bash
   country=US
   ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
   update_config=1

   network={
       ssid="YourNetworkName"
       psk="YourNetworkPassword"
   }
   ```

5. Save the file using **UTF-8 encoding** and ensure there are **no extra spaces or smart quotes**.
6. Safely eject the SD card and reinsert it into the Pi.
7. Boot up â€” the Pi will copy this configuration into `/etc/wpa_supplicant/` automatically.

> **Note:**
>
> - This method is less reliable on some OS versions (especially Raspberry Pi OS Bookworm).
> - Incorrect country codes or malformed files can cause Wi-Fi to fail entirely.
> - Always ensure you use plain text and standard quotation marks.

## Getting Additional Help

### Before Asking for Help

1. **Check this troubleshooting guide** thoroughly
2. **Search existing GitHub issues** for similar problems
3. **Collect diagnostic information** using commands above
4. **Take clear photos** of your setup if hardware-related

### Where to Get Help

- **GitHub Issues**: https://github.com/humancomputerlab/le_lamp/issues
- **Discord Community**: https://discord.gg/4hmNW3Ep
- **LeLamp Runtime Issues**: https://github.com/humancomputerlab/lelamp_runtime/issues

### What Information to Include

- **Problem description**: Clear, specific description of the issue
- **Steps to reproduce**: Exact sequence that leads to the problem
- **Error messages**: Complete error text, not screenshots of text
- **System information**: Pi model, OS version, hardware configuration
- **Photos**: Clear images of your setup for hardware issues

## Component Testing Order

When diagnosing issues, test components in this order:

1. **Power supply**: Verify voltage and current capacity
2. **Individual servos**: Test each servo separately
3. **Servo driver**: Verify communication and control
4. **Pi connectivity**: Ensure SSH and basic operation
5. **Individual sensors**: Camera, microphone, speakers separately
6. **Integrated systems**: Full lamp operation

This systematic approach helps isolate problems and avoid cascading failures.

---

**Previous**: [LeLamp Control](./5.%20LeLamp%20Control.md)
